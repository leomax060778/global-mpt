-- Create INTERLOCK_DEFAULT_CONFIGURATION table
CREATE COLUMN TABLE "MKTG_PLANNING_TOOL"."INTERLOCK_DEFAULT_CONFIGURATION" (
        "INTERLOCK_DEFAULT_CONFIGURATION_ID" bigint not null primary key generated by default as IDENTITY,
        "INTERLOCK_REQUEST_ORIGIN_ID" bigint not null,
		"ENTITY_ID_FROM" bigint not null,
		"ENTITY_ID_TO" bigint not null,
		"ORGANIZATION_TYPE_FROM" bigint not null,
		"ORGANIZATION_TYPE_TO" bigint not null,

        "CREATED_DATE_TZ" timestamp default CURRENT_TIMESTAMP,
        "MODIFIED_DATE_TZ" timestamp,
        "CREATED_USER_ID" bigint not null,
        "MODIFIED_USER_ID" bigint,
        "ENABLED" tinyint default 1,
        "DELETED" tinyint default 0,

        FOREIGN KEY ("CREATED_USER_ID") REFERENCES "MKTG_PLANNING_TOOL"."USER"("USER_ID"),
        FOREIGN KEY ("ENTITY_ID_FROM") REFERENCES "MKTG_PLANNING_TOOL"."INTERLOCK_ENTITY"("INTERLOCK_ENTITY_ID"),
        FOREIGN KEY ("ENTITY_ID_TO") REFERENCES "MKTG_PLANNING_TOOL"."INTERLOCK_ENTITY"("INTERLOCK_ENTITY_ID"),
        FOREIGN KEY ("ORGANIZATION_TYPE_FROM") REFERENCES "MKTG_PLANNING_TOOL"."ORGANIZATION_TYPE"("ORGANIZATION_TYPE_ID"),
        FOREIGN KEY ("ORGANIZATION_TYPE_TO") REFERENCES "MKTG_PLANNING_TOOL"."ORGANIZATION_TYPE"("ORGANIZATION_TYPE_ID"),
        FOREIGN KEY ("INTERLOCK_REQUEST_ORIGIN_ID") REFERENCES "MKTG_PLANNING_TOOL"."INTERLOCK_REQUEST_ORIGIN"("INTERLOCK_REQUEST_ORIGIN_ID")
);
-- Inserting default data
-- On region spend: From: [Marketing organization / Central Teams], To: [Marketing Organization / Regions]
-- Request: From: [Marketing organization / Central Teams], To: [Marketing Organization / Regions]
--
insert into "MKTG_PLANNING_TOOL"."INTERLOCK_DEFAULT_CONFIGURATION" values(1,1,1,1,1,2,CURRENT_TIMESTAMP,null,1,null,1,0);
insert into "MKTG_PLANNING_TOOL"."INTERLOCK_DEFAULT_CONFIGURATION" values(2,2,1,1,1,2,CURRENT_TIMESTAMP,null,1,null,1,0);

-- Update schema version
INSERT INTO "MKTG_PLANNING_TOOL"."SCHEMA_VERSION"(VERSION, DESCRIPTION, SCRIPT)
VALUES('V5.0.0-76', 'Create INTERLOCK_DEFAULT_CONFIGURATION table', 'V201710191325__Create_interlock_default_configuration.sql');

COMMIT;