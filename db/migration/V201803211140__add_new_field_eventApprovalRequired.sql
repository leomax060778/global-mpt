ALTER TABLE "MKTG_PLANNING_TOOL"."CAMPAIGN_SUB_TYPE" ADD (EVENT_APPROVAL_REQUIRED TINYINT DEFAULT 0);

CREATE COLUMN TABLE DES_TYPE(
 DES_TYPE_ID  BIGINT NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
 NAME NVARCHAR(255) NOT NULL,
  AUTOMATIC_APPROVAL TINYINT DEFAULT 0,
  DELETED_TOKEN NVARCHAR(255),
 CREATED_DATE_TZ  TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
 MODIFIED_DATE_TZ TIMESTAMP ,
 CREATED_USER_ID BIGINT NOT NULL,
 MODIFIED_USER_ID BIGINT NULL,
 ENABLED TINYINT NULL DEFAULT 1,
 DELETED TINYINT NULL DEFAULT 0
);

CREATE COLUMN TABLE DES_TYPE_CAMPAIGN_SUB_TYPE(
	DES_TYPE_CAMPAIGN_SUB_TYPE_ID bigint not null primary key generated by default as IDENTITY,
	DES_TYPE_ID BIGINT NOT NULL,
    CAMPAIGN_SUB_TYPE_ID BIGINT NOT NULL,
    created_date_tz timestamp default CURRENT_TIMESTAMP,
    modified_date_tz timestamp,
	created_user_id bigint not null,
	modified_user_id bigint,
	enabled tinyint default 1,
	deleted tinyint default 0,
    FOREIGN KEY ("CREATED_USER_ID") REFERENCES "MKTG_PLANNING_TOOL"."USER"("USER_ID"),
    FOREIGN KEY ("DES_TYPE_ID") REFERENCES "MKTG_PLANNING_TOOL"."DES_TYPE"("DES_TYPE_ID"),
    FOREIGN KEY ("CAMPAIGN_SUB_TYPE_ID") REFERENCES "MKTG_PLANNING_TOOL"."CAMPAIGN_SUB_TYPE"("CAMPAIGN_SUB_TYPE_ID")
);

-- *************************************************************************************
-- Update schema version
INSERT INTO SCHEMA_VERSION(VERSION, DESCRIPTION, SCRIPT)
VALUES('V5.0.0-133', 'add eventApprovalRequired field to CAMPAIGN_SUB_TYPE table ', 'V201803211140__add_new_field_eventApprovalRequired.sql');

COMMIT;

