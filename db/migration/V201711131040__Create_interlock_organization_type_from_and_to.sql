-- *************** Create INTERLOCK_ORGANIZATION_TYPE_FROM ***************
CREATE COLUMN TABLE "MKTG_PLANNING_TOOL"."INTERLOCK_ORGANIZATION_TYPE_FROM"
(
	INTERLOCK_ORGANIZATION_TYPE_FROM_ID BIGINT NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	ORGANIZATION_RELATED_ID BIGINT NOT NULL,
	ORGANIZATION_TYPE_ID BIGINT NOT NULL,
	ORGANIZATION_ID BIGINT NOT NULL,
	INTERLOCK_REQUEST_ID BIGINT NOT NULL,

	CREATED_DATE_TZ TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	MODIFIED_DATE_TZ TIMESTAMP,
	CREATED_USER_ID BIGINT NOT NULL,
	MODIFIED_USER_ID BIGINT,
	ENABLED TINYINT DEFAULT 1,
	DELETED TINYINT DEFAULT 0
);

ALTER TABLE "MKTG_PLANNING_TOOL"."INTERLOCK_ORGANIZATION_TYPE_FROM" ADD FOREIGN KEY ( "CREATED_USER_ID" ) REFERENCES "MKTG_PLANNING_TOOL"."USER" ("USER_ID") ON UPDATE RESTRICT ON DELETE RESTRICT;
ALTER TABLE "MKTG_PLANNING_TOOL"."INTERLOCK_ORGANIZATION_TYPE_FROM" ADD FOREIGN KEY ( "MODIFIED_USER_ID" ) REFERENCES "MKTG_PLANNING_TOOL"."USER" ("USER_ID") ON UPDATE RESTRICT ON DELETE RESTRICT;
ALTER TABLE "MKTG_PLANNING_TOOL"."INTERLOCK_ORGANIZATION_TYPE_FROM" ADD FOREIGN KEY ( "ORGANIZATION_RELATED_ID" ) REFERENCES "MKTG_PLANNING_TOOL"."ORGANIZATION_RELATED" ("ORGANIZATION_RELATED_ID") ON UPDATE RESTRICT ON DELETE RESTRICT;
ALTER TABLE "MKTG_PLANNING_TOOL"."INTERLOCK_ORGANIZATION_TYPE_FROM" ADD FOREIGN KEY ( "ORGANIZATION_TYPE_ID" ) REFERENCES "MKTG_PLANNING_TOOL"."ORGANIZATION_TYPE" ("ORGANIZATION_TYPE_ID") ON UPDATE RESTRICT ON DELETE RESTRICT;
ALTER TABLE "MKTG_PLANNING_TOOL"."INTERLOCK_ORGANIZATION_TYPE_FROM" ADD FOREIGN KEY ( "INTERLOCK_REQUEST_ID" ) REFERENCES "MKTG_PLANNING_TOOL"."INTERLOCK_REQUEST" ("INTERLOCK_REQUEST_ID") ON UPDATE RESTRICT ON DELETE RESTRICT;

-- *************** Create INTERLOCK_ORGANIZATION_TYPE_TO ***************
CREATE COLUMN TABLE "MKTG_PLANNING_TOOL"."INTERLOCK_ORGANIZATION_TYPE_TO"
(
	INTERLOCK_ORGANIZATION_TYPE_TO_ID BIGINT NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	ORGANIZATION_RELATED_ID BIGINT NOT NULL,
	ORGANIZATION_TYPE_ID BIGINT NOT NULL,
	ORGANIZATION_ID BIGINT NOT NULL,
	INTERLOCK_REQUEST_ID BIGINT NOT NULL,

	CREATED_DATE_TZ TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
	MODIFIED_DATE_TZ TIMESTAMP,
	CREATED_USER_ID BIGINT NOT NULL,
	MODIFIED_USER_ID BIGINT,
	ENABLED TINYINT DEFAULT 1,
	DELETED TINYINT DEFAULT 0
);

ALTER TABLE "MKTG_PLANNING_TOOL"."INTERLOCK_ORGANIZATION_TYPE_TO" ADD FOREIGN KEY ( "CREATED_USER_ID" ) REFERENCES "MKTG_PLANNING_TOOL"."USER" ("USER_ID") ON UPDATE RESTRICT ON DELETE RESTRICT;
ALTER TABLE "MKTG_PLANNING_TOOL"."INTERLOCK_ORGANIZATION_TYPE_TO" ADD FOREIGN KEY ( "MODIFIED_USER_ID" ) REFERENCES "MKTG_PLANNING_TOOL"."USER" ("USER_ID") ON UPDATE RESTRICT ON DELETE RESTRICT;
ALTER TABLE "MKTG_PLANNING_TOOL"."INTERLOCK_ORGANIZATION_TYPE_TO" ADD FOREIGN KEY ( "ORGANIZATION_RELATED_ID" ) REFERENCES "MKTG_PLANNING_TOOL"."ORGANIZATION_RELATED" ("ORGANIZATION_RELATED_ID") ON UPDATE RESTRICT ON DELETE RESTRICT;
ALTER TABLE "MKTG_PLANNING_TOOL"."INTERLOCK_ORGANIZATION_TYPE_TO" ADD FOREIGN KEY ( "ORGANIZATION_TYPE_ID" ) REFERENCES "MKTG_PLANNING_TOOL"."ORGANIZATION_TYPE" ("ORGANIZATION_TYPE_ID") ON UPDATE RESTRICT ON DELETE RESTRICT;
ALTER TABLE "MKTG_PLANNING_TOOL"."INTERLOCK_ORGANIZATION_TYPE_TO" ADD FOREIGN KEY ( "INTERLOCK_REQUEST_ID" ) REFERENCES "MKTG_PLANNING_TOOL"."INTERLOCK_REQUEST" ("INTERLOCK_REQUEST_ID") ON UPDATE RESTRICT ON DELETE RESTRICT;

-- *************************************************************************************
-- Update schema version

INSERT INTO SCHEMA_VERSION(VERSION, DESCRIPTION, SCRIPT)
VALUES('V5.0.0-84', 'Create Interlock Organization Type FROM & Interlock Organization Type TO', 'V201711131040__Create_interlock_organization_type_from_and_to.sql');

COMMIT;