ALTER TABLE "MKTG_PLANNING_TOOL"."ALLOCATION_CATEGORY" ADD ("PROCESSING_REPORT_EXPORT_KEY" nvarchar(50));

UPDATE "MKTG_PLANNING_TOOL"."ALLOCATION_CATEGORY"
SET PROCESSING_REPORT_EXPORT_KEY = 'IMP'
WHERE UPPER(NAME) = 'MARKETING PRIORITIES';

UPDATE "MKTG_PLANNING_TOOL"."ALLOCATION_CATEGORY"
SET PROCESSING_REPORT_EXPORT_KEY = 'MKTSEG'
WHERE UPPER(NAME) = 'MARKET SEGMENT';

UPDATE "MKTG_PLANNING_TOOL"."ALLOCATION_CATEGORY"
SET PROCESSING_REPORT_EXPORT_KEY = 'INDUSTRY'
WHERE UPPER(NAME) = 'INDUSTRIES';

UPDATE "MKTG_PLANNING_TOOL"."ALLOCATION_CATEGORY"
SET PROCESSING_REPORT_EXPORT_KEY = 'SOLUTION'
WHERE UPPER(NAME) = 'SOLUTIONS';

UPDATE "MKTG_PLANNING_TOOL"."ALLOCATION_CATEGORY"
SET PROCESSING_REPORT_EXPORT_KEY = 'BUYING_CLASSIFICATION'
WHERE UPPER(NAME) = 'BUYING CLASSIFICATION';


CREATE COLUMN TABLE "MKTG_PLANNING_TOOL"."PROCESSING_REPORT_EXPORT_DATA" (
        "PROCESSING_REPORT_EXPORT_DATA_ID" bigint not null primary key generated by default as IDENTITY,
        "HL_ID" BIGINT,
        "EXTERNAL_ID_PARENT" NVARCHAR(255),
        "OBJECT_TYPE" NVARCHAR(255),
        "EXTERNAL_ID" NVARCHAR(255),
        "TEXT1" NVARCHAR(255),
        "BNAME" NVARCHAR(255),
        "OBJECTIVE" NVARCHAR(255),
        "CAMP_TYPE" NVARCHAR(255),
        "SUB_TYPE" NVARCHAR(255),
        "MKT_PROG_TYPE" NVARCHAR(255),
        "MKT_PROGRAM_ID" NVARCHAR(255),
        "MARKETING_ACTIVITYID" NVARCHAR(255),
        "BUSINESS_OWNER" NVARCHAR(255),
        "PRIORITY" NVARCHAR(255),
        "PLANSTART" TIMESTAMP,
        "PLANFINISH" TIMESTAMP,
        "ACTUALSTART" TIMESTAMP,
        "ACTUALFINISH" TIMESTAMP,
        "SHOW_CALENDAR" NVARCHAR(255),
        "MKT_ORG" NVARCHAR(255),
        "DIS_CHANNEL" NVARCHAR(255),
        "ROUTE_TO_MARKET" NVARCHAR(255),
        "COST_CENTER" NVARCHAR(255),
        "IMP1" NVARCHAR(255),
        "ZZIMP_PERCENTAGE1" NVARCHAR(255),
        "IMP2" NVARCHAR(255),
        "ZZIMP_PERCENTAGE2" NVARCHAR(255),
        "IMP3" NVARCHAR(255),
        "ZZIMP_PERCENTAGE3" NVARCHAR(255),
        "IMP4" NVARCHAR(255),
        "ZZIMP_PERCENTAGE4" NVARCHAR(255),
        "IMP5" NVARCHAR(255),
        "ZZIMP_PERCENTAGE5" NVARCHAR(255),
        "MKTSEG1" NVARCHAR(255),
        "ZZMSEG_PERCENTAGE1" NVARCHAR(255),
        "MKTSEG2" NVARCHAR(255),
        "ZZMSEG_PERCENTAGE2" NVARCHAR(255),
        "MKTSEG3" NVARCHAR(255),
        "ZZMSEG_PERCENTAGE3" NVARCHAR(255),
        "MKTSEG4" NVARCHAR(255),
        "ZZMSEG_PERCENTAGE4" NVARCHAR(255),
        "MKTSEG5" NVARCHAR(255),
        "ZZMSEG_PERCENTAGE5" NVARCHAR(255),
        "INDUSTRY1" NVARCHAR(255),
        "ZZIND_PERCENTAGE1" NVARCHAR(255),
        "INDUSTRY2" NVARCHAR(255),
        "ZZIND_PERCENTAGE2" NVARCHAR(255),
        "INDUSTRY3" NVARCHAR(255),
        "ZZIND_PERCENTAGE3" NVARCHAR(255),
        "INDUSTRY4" NVARCHAR(255),
        "ZZIND_PERCENTAGE4" NVARCHAR(255),
        "INDUSTRY5" NVARCHAR(255),
        "ZZIND_PERCENTAGE5" NVARCHAR(255),
        "SOLUTION1" NVARCHAR(255),
        "ZZSOL_PERCENTAGE1" NVARCHAR(255),
        "SOLUTION2" NVARCHAR(255),
        "ZZSOL_PERCENTAGE2" NVARCHAR(255),
        "SOLUTION3" NVARCHAR(255),
        "ZZSOL_PERCENTAGE3" NVARCHAR(255),
        "SOLUTION4" NVARCHAR(255),
        "ZZSOL_PERCENTAGE4" NVARCHAR(255),
        "SOLUTION5" NVARCHAR(255),
        "ZZSOL_PERCENTAGE5" NVARCHAR(255),
        "R3_TRANS_STATUS" NVARCHAR(255),
        "ORG_WWW" NVARCHAR(255),
        "VENUE" NVARCHAR(255),
        "NO_OF_PARTICIPANTS" NVARCHAR(255),
        "STREET" NVARCHAR(255),
        "CITY" NVARCHAR(255),
        "COUNTRY" NVARCHAR(255),
        "BUYING_CLASSIFICATION" NVARCHAR(255),
        "PARTNER_FCT" NVARCHAR(255),
        "PARTNER_NO" NVARCHAR(255),
        "MAINPARTNER" NVARCHAR(255),
        "PARTNER_FCT1" NVARCHAR(255),
        "PARTNER_NO1" NVARCHAR(255),
        "MAINPARTNER1" NVARCHAR(255),
        "PARTNER_FCT2" NVARCHAR(255),
        "PARTNER_NO2" NVARCHAR(255),
        "MAINPARTNER2" NVARCHAR(255),

        "CREATED_DATE_TZ" timestamp default CURRENT_TIMESTAMP,
        "MODIFIED_DATE_TZ" timestamp,
        "CREATED_USER_ID" bigint not null,
        "MODIFIED_USER_ID" bigint,
        "ENABLED" tinyint default 1,
        "DELETED" tinyint default 0,

        FOREIGN KEY ("CREATED_USER_ID") REFERENCES "MKTG_PLANNING_TOOL"."USER"("USER_ID")
);



-- Update schema version
INSERT INTO "MKTG_PLANNING_TOOL"."SCHEMA_VERSION"(VERSION, DESCRIPTION, SCRIPT)
VALUES('V5.0.0-71', 'Implement Processing Report Data Template', 'V201710091643_PROCESSING_REPORT_DATA_TEMPLATE.sql');

COMMIT;