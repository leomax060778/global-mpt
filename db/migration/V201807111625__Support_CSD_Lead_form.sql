CREATE COLUMN TABLE "MKTG_PLANNING_TOOL"."LEAD_FORM" (
    LEAD_FORM_ID  BIGINT NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    HL5_ID  BIGINT NOT NULL,
	HL4_ID BIGINT, -- Campaign ID
	SERVICE_REQUEST_CATEGORY_OPTION_LEVEL_ID BIGINT NOT NULL, -- Option ID
	FORM_STATUS_DETAIL_ID BIGINT NOT NULL,
    SUMMARY NVARCHAR(255),
    REGION_ID BIGINT,
    SUBREGION_ID BIGINT, -- Market Unit
    COUNTRY_ID BIGINT,
	SPECIAL_ROUTING TINYINT,
	TARGET_SELECT_CRITERIA_ID BIGINT, -- Related with: Does your file include CRM ID?
	SPECIAL_NOTES NVARCHAR(3000),
	UPLOAD_LEAD TINYINT DEFAULT 0,
	UPLOAD_DATA_SOURCE NVARCHAR(255), -- Depends on UPLOAD_LEAD = 1
	UPLOAD_DATA_PURPOSE NVARCHAR(255), -- Depends on UPLOAD_LEAD = 1
	UPLOAD_DATA_LEASED TINYINT, -- Depends on UPLOAD_LEAD = 1
	UPLOAD_DUMMY_SIC_CODE_APPROVAL TINYINT, -- Depends on UPLOAD_LEAD = 1
	UPLOAD_DUMMY_DUNS_APPROVAL TINYINT, -- Depends on UPLOAD_LEAD = 1
	ATTACHMENT_ID BIGINT,
	NUMBER_OF_RECORDS INTEGER,
	COMPLEXITY TINYINT,

	CSD_SELF NVARCHAR(255), -- NULL because we can save as draft.
	CSD_ID BIGINT, -- NULL because we can save as draft.
	CSD_KEY NVARCHAR(255), -- NULL because we can save as draft.

    CREATED_DATE_TZ  TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    MODIFIED_DATE_TZ TIMESTAMP ,
    CREATED_USER_ID BIGINT NOT NULL,
    MODIFIED_USER_ID BIGINT NULL,
    ENABLED TINYINT DEFAULT 1,
    DELETED TINYINT DEFAULT 0
);

ALTER TABLE "MKTG_PLANNING_TOOL"."LEAD_FORM" ADD FOREIGN KEY ( "CREATED_USER_ID" ) REFERENCES "MKTG_PLANNING_TOOL"."USER" ("USER_ID") ON UPDATE RESTRICT ON DELETE RESTRICT;
ALTER TABLE "MKTG_PLANNING_TOOL"."LEAD_FORM" ADD FOREIGN KEY ( "HL5_ID" ) REFERENCES "MKTG_PLANNING_TOOL"."HL5" ("HL5_ID") ON UPDATE RESTRICT ON DELETE RESTRICT;
ALTER TABLE "MKTG_PLANNING_TOOL"."LEAD_FORM" ADD FOREIGN KEY ( "HL4_ID" ) REFERENCES "MKTG_PLANNING_TOOL"."HL4" ("HL4_ID") ON UPDATE RESTRICT ON DELETE RESTRICT;
ALTER TABLE "MKTG_PLANNING_TOOL"."LEAD_FORM" ADD FOREIGN KEY ( "SERVICE_REQUEST_CATEGORY_OPTION_LEVEL_ID" ) REFERENCES "MKTG_PLANNING_TOOL"."SERVICE_REQUEST_CATEGORY_OPTION_LEVEL" ("SERVICE_REQUEST_CATEGORY_OPTION_LEVEL_ID") ON UPDATE RESTRICT ON DELETE RESTRICT;
ALTER TABLE "MKTG_PLANNING_TOOL"."LEAD_FORM" ADD FOREIGN KEY ( "FORM_STATUS_DETAIL_ID" ) REFERENCES "MKTG_PLANNING_TOOL"."FORM_STATUS_DETAIL" ("FORM_STATUS_DETAIL_ID") ON UPDATE RESTRICT ON DELETE RESTRICT;

-- *************************************************************************************
-- Update schema version
INSERT INTO SCHEMA_VERSION(VERSION, DESCRIPTION, SCRIPT)
VALUES('V5.0.0-164', 'Support CSD Lead form', 'V201807111625__Support_CSD_Lead_form.sql');

COMMIT;