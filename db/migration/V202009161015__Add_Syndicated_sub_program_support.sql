ALTER TABLE "MKTG_PLANNING_TOOL"."BUDGET_YEAR" ADD(SYNDICATED_SUB_PROGRAM_REQUIRED TINYINT DEFAULT 0);
ALTER TABLE "MKTG_PLANNING_TOOL"."ALLOCATION_CATEGORY_OPTION_LEVEL" DROP (MARKETING_PROGRAM_ID);
-- *********** Master Table between  ALLOCATION_CATEGORY_OPTION_LEVEL AND MARKETING_PROGRAM_ID ********** --
CREATE COLUMN TABLE "MKTG_PLANNING_TOOL"."ALLOCATION_CATEGORY_OPTION_LEVEL_SYNDICATED_SUB_PROGRAM"(
	"ALLOCATION_CATEGORY_OPTION_LEVEL_SYNDICATED_SUB_PROGRAM_ID" bigint not null primary key generated by default as IDENTITY,
	"ALLOCATION_CATEGORY_ID" BIGINT NOT NULL,
	"ALLOCATION_OPTION_ID" BIGINT NOT NULL,
	"MARKETING_PROGRAM_ID" BIGINT NOT NULL,
	"HIERARCHY_LEVEL_ID" BIGINT NOT NULL,

	"CREATED_DATE_TZ" timestamp default CURRENT_TIMESTAMP,
    "MODIFIED_DATE_TZ" timestamp,
    "CREATED_USER_ID" bigint not null,
    "MODIFIED_USER_ID" bigint,
    "ENABLED" tinyint default 1,
    "DELETED" tinyint default 0,

	FOREIGN KEY ("CREATED_USER_ID") REFERENCES "MKTG_PLANNING_TOOL"."USER"("USER_ID"),
	FOREIGN KEY ("ALLOCATION_CATEGORY_ID") REFERENCES "MKTG_PLANNING_TOOL"."ALLOCATION_CATEGORY"("ALLOCATION_CATEGORY_ID"),
	FOREIGN KEY ("ALLOCATION_OPTION_ID") REFERENCES "MKTG_PLANNING_TOOL"."ALLOCATION_OPTION"("ALLOCATION_OPTION_ID")
);

-- *************************************************************************************
-- Update schema version
INSERT INTO SCHEMA_VERSION(VERSION, DESCRIPTION, SCRIPT)
VALUES('V5.0.0-196', 'Add SYNDICATED_SUB_PROGRAM_REQUIRED Column in BUDGET_YEAR Table', 'V202009161015__Add_Syndicated_sub_program_support.sql');

COMMIT;
