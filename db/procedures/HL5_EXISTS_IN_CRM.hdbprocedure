PROCEDURE "MKTG_PLANNING_TOOL"."mktgplanningtool.db.procedures::HL5_EXISTS_IN_CRM" (
	IN in_hl5_id BIGINT,
	OUT out_result TINYINT) 
	LANGUAGE SQLSCRIPT
	SQL SECURITY INVOKER 
	DEFAULT SCHEMA "MKTG_PLANNING_TOOL"
	READS SQL DATA AS
BEGIN

-- Check if the HL5 has been in the "In CRM" or "In CRM-Need New Budget Approval" status
	SELECT COUNT(*)
	INTO out_result
	FROM HL5_STATUS_HISTORY
	WHERE (hl5_status_detail_id = 3 or hl5_status_detail_id = 8)
	  AND hl5_id = in_hl5_id;
	  
END;
