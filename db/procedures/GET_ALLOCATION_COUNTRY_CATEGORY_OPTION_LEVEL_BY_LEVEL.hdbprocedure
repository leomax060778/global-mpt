PROCEDURE "MKTG_PLANNING_TOOL"."mktgplanningtool.db.procedures::GET_ALLOCATION_COUNTRY_CATEGORY_OPTION_LEVEL_BY_LEVEL" (
	IN in_hierarchy_level_id bigint,
	IN in_hl2_id bigint,
	OUT out_result TABLE (
	    option_id integer
	    , category_id integer
	    , category_option_level_id integer
	    , enabled tinyint
        , deleted tinyint
	    )
	)
	LANGUAGE SQLSCRIPT
	SQL SECURITY INVOKER
	DEFAULT SCHEMA "MKTG_PLANNING_TOOL" AS
BEGIN
	out_result =
    SELECT ACOL.ALLOCATION_COUNTRY_CATEGORY_OPTION_ID as option_id
    , ACOL.allocation_category_id as category_id
	, ACOL.ALLOCATION_COUNTRY_CATEGORY_OPTION_LEVEL_ID as category_option_level_id
	, ACOL.enabled
	, ACOL.deleted
	from ALLOCATION_COUNTRY_CATEGORY_OPTION_LEVEL ACOL
	INNER JOIN ALLOCATION_COUNTRY_CATEGORY_OPTION_LEVEL_HL2 ACOL_HL2
	    ON ACOL_HL2.ALLOCATION_COUNTRY_CATEGORY_OPTION_LEVEL_ID = ACOL.ALLOCATION_COUNTRY_CATEGORY_OPTION_LEVEL_ID
	    AND ACOL_HL2.HL2_ID = in_hl2_id
	where ACOL.hierarchy_level_id = in_hierarchy_level_id;
END;
