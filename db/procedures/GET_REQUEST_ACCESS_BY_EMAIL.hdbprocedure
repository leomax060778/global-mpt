PROCEDURE "MKTG_PLANNING_TOOL"."mktgplanningtool.db.procedures::GET_REQUEST_ACCESS_BY_EMAIL" (
	in_email NVARCHAR(255),
	OUT out_result TABLE(
	    REQUEST_ACCESS_ID bigint
	    , USER_NAME nvarchar(255)
	    , FIRST_NAME nvarchar(255)
	    , LAST_NAME nvarchar(255)
	    , EMAIL nvarchar(255)
	    , PHONE nvarchar(255)
	)
)
 
	LANGUAGE SQLSCRIPT
	SQL SECURITY INVOKER 
	DEFAULT SCHEMA "MKTG_PLANNING_TOOL"
	READS SQL DATA AS
BEGIN
/***************************** 
	Write your procedure logic 
 *****************************/
  out_result = SELECT REQUEST_ACCESS_ID
                      , USER_NAME
                      , FIRST_NAME
                      , LAST_NAME
                      , EMAIL
                      , PHONE
 		FROM REQUEST_ACCESS
 		WHERE upper(EMAIL) = upper(in_email) AND
 		ENABLED = 1 AND DELETED = 0;
END;
